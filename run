#!/bin/sh

set -e

trap clean 0 1 2 3 6

clean() {
  rm -f Lex.hs Parse.hs *.{hi,o} Main
}

alex Lex.x
happy Parse.y

runhaskell Test.hs

case "$1" in
  Test.hs)      ;;
  *.hs|*.x|*.y) ghci "${1%.*}.hs";;
  *)            echo "cannot run '$1'";;
esac
